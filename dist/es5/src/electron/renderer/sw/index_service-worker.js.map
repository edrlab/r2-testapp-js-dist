{"version":3,"file":"index_service-worker.js","sourceRoot":"","sources":["../../../../../../src/electron/renderer/sw/index_service-worker.ts"],"names":[],"mappings":";;;AAEA,sCAA6C,kBAA0B;IAAvE,iBAgCC;IA9BG,IAAM,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,SAAS,CAAgB,CAAC;IAClE,QAAQ,CAAC,YAAY,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;IACxC,QAAQ,CAAC,YAAY,CAAC,gBAAgB,EAClC,2DAA2D;QAC3D,kEAAkE,CAAC,CAAC;IACxE,QAAQ,CAAC,YAAY,CAAC,SAAS,EAAE,gCAAgC,CAAC,CAAC;IACnE,IAAM,YAAY,GAAG,QAAQ,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;IAC9D,EAAE,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;QACf,YAAY,CAAC,WAAW,CAAC,QAAgB,CAAC,CAAC;IAC/C,CAAC;IAOD,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE;QAElC,QAAgB,CAAC,YAAY,EAAE,CAAC;QAGjC,UAAU,CAAC;;;;aAEV,EAAE,IAAI,CAAC,CAAC;IACb,CAAC,CAAC,CAAC;IAGH,IAAM,SAAS,GAAG,kBAAkB,GAAG,MAAM,CAAC;IAC9C,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;IACvB,QAAQ,CAAC,YAAY,CAAC,KAAK,EAAE,SAAS,CAAC,CAAC;AAC5C,CAAC;AAhCD,oEAgCC","sourcesContent":["// import { startNavigatorExperiment } from \"../index_navigator\";\n\nexport function startServiceWorkerExperiment(publicationJsonUrl: string) {\n\n    const webview2 = document.createElement(\"webview\") as HTMLElement;\n    webview2.setAttribute(\"id\", \"webview2\");\n    webview2.setAttribute(\"webpreferences\",\n        \"nodeIntegration=0, nodeIntegrationInWorker=0, sandbox=0, \" +\n        \"contextIsolation=0, webSecurity=1, allowRunningInsecureContent=0\");\n    webview2.setAttribute(\"preload\", \"./sw/preload_service-worker.js\");\n    const readerChrome = document.getElementById(\"reader_chrome\");\n    if (readerChrome) {\n        readerChrome.appendChild(webview2 as Node);\n    }\n    // webview2.addEventListener('did-start-loading', () => {\n    // });\n    // webview2.addEventListener('did-stop-loading', () => {\n    // });\n    // webview2.addEventListener('did-finish-load', () => {\n    // });\n    webview2.addEventListener(\"dom-ready\", () => {\n\n        (webview2 as any).openDevTools();\n        // const wc = webview2.getWebContents();\n\n        setTimeout(async () => {\n            // startNavigatorExperiment(publicationJsonUrl);\n        }, 2000);\n    });\n    // const swBootUrl = publicationJsonUrl + \"/show/metadata\";\n    // const swBootUrl = publicationJsonUrl;\n    const swBootUrl = publicationJsonUrl + \"/../\";\n    console.log(swBootUrl);\n    webview2.setAttribute(\"src\", swBootUrl);\n}\n"]}