{"version":3,"file":"index_.js","sourceRoot":"","sources":["../../../../../../../src/electron/renderer/riots/menuselect/index_.ts"],"names":[],"mappings":"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","sourcesContent":["// http://riotjs.com/guide/\n// http://riotjs.com/api/\n\nexport interface IRiotOptsMenuSelectItem {\n    id: string;\n    label: string;\n    style?: string;\n}\nexport interface IRiotOptsMenuSelect {\n    options: IRiotOptsMenuSelectItem[];\n    label: string;\n    selected: string;\n    disabled: boolean;\n}\n\nexport interface IRiotTagMenuSelect extends\n    RiotTag {\n    setDisabled: (disabled: boolean) => void;\n    setSelectedItem: (item: string) => void;\n    getIndexForId: (id: string) => number | undefined;\n    getIndexForLabel: (label: string) => number | undefined;\n    getIdForLabel: (label: string) => string | undefined;\n    getLabelForId: (id: string) => string | undefined;\n}\n\nexport const riotMountMenuSelect = (selector: string, opts: IRiotOptsMenuSelect): RiotTag[] => {\n    const tag = riot.mount(selector, opts);\n    // console.log(tag); // RiotTag[]\n    return tag;\n};\n\n// tslint:disable-next-line:space-before-function-paren\n(window as any).riot_menuselect = function (_opts: IRiotOptsMenuSelect) {\n    const that = this as IRiotTagMenuSelect;\n\n    // tslint:disable-next-line:space-before-function-paren\n    that.getIndexForId = function (id: string): number | undefined {\n        // let nDivider = 0;\n        // (this.opts as IRiotOptsMenuSelect).options.forEach((option) => {\n        //     if (option.label === \"_\") {\n        //         nDivider++;\n        //     }\n        // });\n        let index = -1;\n        const found = (this.opts as IRiotOptsMenuSelect).options.find((option) => {\n            if (option.label !== \"_\") {\n                index++;\n            }\n            return option.id === id;\n        });\n        // (this.opts as IRiotOptsMenuSelect).options.indexOf(found) - nDivider\n        return found ? index : undefined;\n    };\n\n    // tslint:disable-next-line:space-before-function-paren\n    that.getIndexForLabel = function (label: string): number | undefined {\n        // let nDivider = 0;\n        // (this.opts as IRiotOptsMenuSelect).options.forEach((option) => {\n        //     if (option.label === \"_\") {\n        //         nDivider++;\n        //     }\n        // });\n        let index = -1;\n        const found = (this.opts as IRiotOptsMenuSelect).options.find((option) => {\n            if (option.label !== \"_\") {\n                index++;\n            }\n            return option.label === label;\n        });\n        // (this.opts as IRiotOptsMenuSelect).options.indexOf(found) - nDivider\n        return found ? index : undefined;\n    };\n\n    // tslint:disable-next-line:space-before-function-paren\n    that.getLabelForId = function (id: string): string | undefined {\n        const found = (this.opts as IRiotOptsMenuSelect).options.find((option) => {\n            return option.id === id;\n        });\n        return found ? found.label : undefined;\n    };\n\n    // tslint:disable-next-line:space-before-function-paren\n    that.getIdForLabel = function (label: string): string | undefined {\n        const found = (this.opts as IRiotOptsMenuSelect).options.find((option) => {\n            return option.label === label;\n        });\n        return found ? found.id : undefined;\n    };\n\n    // tslint:disable-next-line:space-before-function-paren\n    that.setSelectedItem = function (item: string) {\n\n        let index = that.getIndexForId(item);\n        if (typeof index === \"undefined\" || index < 0) {\n            index = 0;\n            item = (this.opts as IRiotOptsMenuSelect).options[0].id;\n        }\n        // console.log(\"setSelectedItem\");\n        // console.log(item);\n        // console.log(index);\n        (this.opts as IRiotOptsMenuSelect).selected = item;\n        (that.root as any).mdcSelect.selectedIndex = index;\n        this.update();\n    };\n\n    // tslint:disable-next-line:space-before-function-paren\n    that.setDisabled = function (disabled: boolean) {\n\n        this.opts.disabled = disabled;\n        (that.root as any).mdcSelect.disabled = disabled;\n        // this.update();\n    };\n\n    that.on(\"mount\", () => {\n\n        const menuFactory = (menuEl: HTMLElement) => {\n            const menu = new (window as any).mdc.menu.MDCMenu(menuEl);\n            (menuEl as any).mdcSimpleMenu = menu;\n            return menu;\n        };\n        // MDCSelect.attachTo(that.root)\n        const mdcSelector = new (window as any).mdc.select.MDCSelect(that.root, undefined, menuFactory);\n        (that.root as any).mdcSelect = mdcSelector;\n\n        mdcSelector.disabled = that.opts.disabled;\n\n        mdcSelector.listen(\"MDCSelect:change\", (ev: any) => {\n            // console.log(\"MDCSelect:change: \" + that.root.id);\n            // console.log(ev);\n            // console.log(ev.detail.selectedOptions[0].textContent);\n            // console.log(ev.detail.selectedIndex);\n            // console.log(ev.detail.value);\n\n            // let label = ev.detail.value;\n            // const element = that.root.ownerDocument.getElementById(label);\n            // if (element) {\n            //     console.log(element.textContent);\n            //     label = element.textContent;\n            // }\n\n            that.trigger(\"selectionChanged\", ev.detail.value);\n        });\n    });\n};\n"]}